/*
  filename: jquery.integralui.widget.min.js
  version : 1.0.038
  Copyright © 2014 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
(function(f){f.widget("integralui.widget",{version:"1.0.038",options:{allowAnimation:!0,animationSpeed:500},_create:function(){this._super();this.items=[];this.currentList=[];this.allowUpdate=!0;this.widgetName="widget";this.eventNames={beforeAdd:"itemadding",beforeRemove:"itemremoving",afterAdd:"itemadded",afterRemove:"itemremoved"};this.suppressCallBack=!1;this.twp=6E4;this.element.attr("unselectable","on").css("user-select","none").on("selectstart",!1);this.csft=1;var a=this._crpar();this.$tw=f(this._crtr(a));this.twp2=3E3},_init:function(){this._bindEvents();this._super()},_bindEvents:function(){},_destroy:function(){this._s2t();this.items.length=0;this.currentList.length=0;this.element.empty();this._super()},_setEventNames:function(a){a.beforeAdd&&(this.eventNames.beforeAdd=a.beforeAdd);a.beforeRemove&&(this.eventNames.beforeRemove=a.beforeRemove);a.afterAdd&&(this.eventNames.afterAdd=a.afterAdd);a.afterRemove&&(this.eventNames.afterRemove=a.afterRemove)},_setOption:function(a,b){switch(a){case "allowAnimation":if(!0!==b&&!1!==b)return;this.options.allowAnimation=b;this.refresh();break;case "animationSpeed":if(!f.isNumeric(b)||0>b)return;this.options.animationSpeed!==b&&(this.options.animationSpeed=b)}this._super(a,b)},_triggerEvent:function(a,b,c){a=f.Event(a,{object:b,mousePos:c});this.element.trigger(a);return a.result},_add:function(a,b){this._insertAt(a,-1,b)},_clear:function(a){this.getList(a).length=0;this._triggerEvent("clear");this.element.scrollTop(0);this.refresh()},_insertAfter:function(a,b){this._insertItem(a,b,!0)},_insertAt:function(a,b,c){this._insert(a,b,c,null,!1)},_insertBefore:function(a,b){this._insertItem(a,b,!1)},_insert:function(a,b,c,d,e){var g=!0;this._isUpdateAllowed()&&(g=this._triggerEvent(this.eventNames.beforeAdd,a));!1!==g&&a&&(c&&(a.pid=c.id),g=this.getList(c),0>b||null===b||void 0===b?g.push(a):(b=Math.max(Math.min(b,g.length),0),!d&&b<g.length&&(d=g[b]),g.splice(b,0,a)),b=this.options.allowAnimation,this.allowEvents=this.options.allowAnimation=!1,this._performRefreshAfter("add",a,c,d,e),this._updateWholeLayout(),this.allowEvents=!0,this.options.allowAnimation=b,this._isUpdateAllowed()&&this._triggerEvent(this.eventNames.afterAdd,a))},_insertItem:function(a,b,c){if(a&&b){var d=this._findParent(b,this.items),e=this.getList(d),e=f.inArray(b,e);c&&(e+=1);this._insert(a,e,d,b,c)}},_remove:function(a){if(a){var b=!0;this._isUpdateAllowed()&&(b=this._triggerEvent(this.eventNames.beforeRemove,a));if(!1!==b){var b=this._findParent(a,this.items),c=this.getList(b);f.inArray(a,c);this._performRefreshBefore("remove",a,b);c=f.grep(c,function(b){return b!=a});this._applyList(b,c);this._performRefreshAfter("remove",a,b);this._updateWholeLayout();this._isUpdateAllowed()&&this._triggerEvent(this.eventNames.afterRemove,a)}}},_removeAt:function(a,b){if(null!==a&&void 0!==a){var c=this.getList(b);if(0<=a&&a<c.length){var d=c[a],e=!0;this._isUpdateAllowed()&&(e=this._triggerEvent(this.eventNames.beforeRemove,d));!1!==e&&(this._performRefreshBefore("remove",d,b),c=f.grep(c,function(b){return b!=c[a]}),this._applyList(b,c),this._performRefreshAfter("remove",d,b),this._updateWholeLayout(),this._isUpdateAllowed()&&this._triggerEvent(this.eventNames.afterRemove,d))}}},_applyList:function(a,b){a?a.items=b:this.items=b},_findItemById:function(a,b){if(a)if(b)for(var c=0;c<this.currentList.length;c++){if(this.currentList[c].id&&this.currentList[c].id.toString()===a.toString())return this.currentList[c]}else return this._fullSearchItem(this.items,a);return null},_findItemByText:function(a,b){if(b)for(var c=0;c<this.currentList.length;c++){if(this.currentList[c].text===a)return this.currentList[c]}else return this._fullSearchItem(this.items,a,"text");return null},_findParent:function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<b.length;)c=b[d].id===a.pid?b[d]:this._findParent(a,b[d].items),d++;return c},_getParent:function(a){if(null!==a.pid&&void 0!==a.pid)for(var b=0;b<this.currentList.length;b++)if(this.currentList[b].id===a.pid)return this.currentList[b];return null},_fullSearchItem:function(a,b,c){var d=null;if(a&&b)for(var e=0,f=!1;!d&&e<a.length;){switch(c){case "text":f=a[e].text===b;break;default:f=a[e].id.toString()===b.toString()}d=f?a[e]:this._fullSearchItem(a[e].items,b,c);e++}return d},getCurrentList:function(){return this.currentList},getList:function(a){if(a){if(null===a.items||void 0===a.items)a.items=[];return a.items}return this.items},getItemParent:function(a){return this._findParent(a,this.items)},_adjustElemVertical:function(a,b){var c=f(b).outerHeight(),d=a.height();return d<c?((c-d)/2).toString()+"px":"0"},_isIndexInRange:function(a,b){var c=this.currentList;b&&(c=b);return 0<=a&&a<c.length},_createId:function(){return f("<p></p>").uniqueId().attr("id")},_getBorderValue:function(a){return{top:this._getNumValueFromCSS(a,"border-top-width"),right:this._getNumValueFromCSS(a,"border-right-width"),bottom:this._getNumValueFromCSS(a,"border-bottom-width"),left:this._getNumValueFromCSS(a,"border-left-width")}},_getContentElem:function(a){var b=a.find("[data-element='content']");0===b.length&&(b=a.children("span:last-of-type"));return b},_getItemByIndex:function(a,b){if(b){var c=this.getList(b);if(this._isIndexInRange(a,c))return c[a]}return null},_getMarginValue:function(a){return{top:this._getNumValueFromCSS(a,"margin-top"),right:this._getNumValueFromCSS(a,"margin-right"),bottom:this._getNumValueFromCSS(a,"margin-bottom"),left:this._getNumValueFromCSS(a,"margin-left")}},_getNextItem:function(a){if(a){var b=this._getParent(a),c=this.getList(b);a=f.inArray(a,c);return this._isIndexInRange(a+1,c)?c[a+1]:this._getNextItem(b)}return null},_getNumValueFromCSS:function(a,b){return 0<a.length?parseInt(a.css(b).replace(/[^-\d\.]/g,"")):0},_getPaddingValue:function(a){return{top:this._getNumValueFromCSS(a,"padding-top"),right:this._getNumValueFromCSS(a,"padding-right"),bottom:this._getNumValueFromCSS(a,"padding-bottom"),left:this._getNumValueFromCSS(a,"padding-left")}},_hitTest:function(a,b,c){return a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom?!0:!1},_isEqual:function(a,b){return a&&b&&a.id&&b.id?a.id.toString()===b.id.toString():!1},_outerHtml:function(a){return f("<div />").append(a.clone()).html()},_checkExpandState:function(){return!1},_crpar:function(){return["si","tri","ver","on","al "]},_crtr:function(a){var b;b="<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>";b+=a[1]+a[4]+a[2]+a[0]+a[3];return b+="</div>"},_s1t:function(a){var b=this;b.trlTime=setTimeout(function(){b.$tw.animate({queue:!1},100,function(){b._trl()})},a)},_s2t:function(){this.trlTime&&(clearTimeout(this.trlTime),this.$tw.stop())},_ut:function(){this._s2t();1===this.csft||3===this.csft?this._s1t(this.twp):this._s1t(this.twp2)},_trl:function(){this.$tw.css({top:this.element.scrollTop(),left:this.element.scrollLeft()});1===this.csft||3===this.csft?this.$tw.fadeIn():this.$tw.fadeOut();3<this.csft?this.csft=1:this.csft++;this._ut()},_addChildItems:function(a){if(null===a.items||void 0===a.items)this.currentList.push(a);else if(this.currentList.push(a),this._checkExpandState(a))for(var b=0;b<a.items.length;b++)this._addChildItems(a.items[b])},_isUpdateAllowed:function(){return this.allowUpdate},_performRefreshBefore:function(a,b,c,d,e){},_performRefreshAfter:function(a,b,c,d,e){this.refresh()},_updateCurrentList:function(){this.currentList.length=0;if(0<this.items.length)for(var a=0;a<this.items.length;a++)this._addChildItems(this.items[a])},_updateWholeLayout:function(){},refresh:function(){this.allowUpdate&&this._updateCurrentList()},resumeLayout:function(){this.allowUpdate=!0;this.refresh()},suspendLayout:function(){this.allowUpdate=!1}})})(jQuery);