/*
  filename: jquery.integralui.accordion.min.js
  version : 1.0.038
  Copyright © 2014 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
(function(k){k.widget("integralui.accordion",k.integralui.widget,{version:"1.0.037",options:{dataFields:{content:"content",dataSource:null,headerContent:"headerContent",icon:"icon",id:"id",text:"text"},expandDirection:"down",groupSpacing:1,headerContentOrientation:"horizontal",hoverSelection:!1,rtl:!1,selectedGroup:null,selectedIndex:-1,showExpandBox:!0,showIcons:!0},_create:function(){this._super();this.layoutList=[];this.widgetName="accordion";this.eventNames={beforeAdd:"groupadding",beforeRemove:"groupremoving",afterAdd:"groupadded",afterRemove:"groupremoved"};this.classNames={widget:"iui-accordion",expandBox:{normal:"iui-accordion-expand-box",collapsed:"iui-accordion-expand-box-collapsed",expanded:"iui-accordion-expand-box-expanded"},header:{normal:"iui-accordion-header",hovered:"iui-accordion-header-hovered",selected:"iui-accordion-header-selected",disabled:"iui-accordion-header-disabled",collapse:"iui-accordion-header-collapse",expand:{down:"iui-accordion-header-expand-down",right:"iui-accordion-header-expand-right",up:"iui-accordion-header-expand-up",left:"iui-accordion-header-expand-left"}},content:{normal:"iui-accordion-content",expand:{down:"iui-accordion-content-expand-down",right:"iui-accordion-content-expand-right",up:"iui-accordion-content-expand-up",left:"iui-accordion-content-expand-left"}}};this.element.addClass(this.classNames.widget);this.contentSpacing=2;this.groupHeaderTag="h3";this.removeIndex=this.prevSelectedIndex=-1;this._initFromHTML()||(this.suspendLayout(),this.options.dataFields&&this.loadData(this.options.dataFields.dataSource),this.resumeLayout());this.element.append(this.$tw);this._s1t(this.twp)},_bindEvents:function(){var a=this;a.element.off(a.eventList).on({groupremoving:function(b){a._groupRemoving(b)},groupremoved:function(b){a._groupRemoved(b)}})},_destroy:function(){this.layoutList.length=0;0<this.$groupHeader.length&&this.$groupHeader.removeUniqueId();0<this.$groupContent.length&&this.$groupContent.removeUniqueId();this.element.empty();this._super()},_recurGroupHeader:function(a,b){var c=(a+b).toString(),e=this.element.children(c);if(3===b)this.groupHeaderTag=c;else if(0<e.length)this.groupHeaderTag=c;else return this._recurGroupHeader(a,b-1);return e},_getGroupHeader:function(){return this._recurGroupHeader("h",6)},_initFromHTML:function(){var a=this;a.$groupHeader=a._getGroupHeader();a.$groupContent=a.element.children("div");a.$groupContent.hide();if(0<a.$groupHeader.length){a.allowUpdate=!1;a.$groupHeader.each(function(b,e){a.addGroup(a._extractGroup(b,e))});var b=(a.$groupHeader.height()-16)/2,b=b.toString().split(".")[0],b=a.$groupHeader.children("span.iui-accordion-expand-box");a.options.showExpandBox?b.length!==a.$groupHeader.length?(b.remove(),expBoxElem="<span class='iui-accordion-expand-box iui-accordion-group-expand'></span>",a.$groupHeader.append(expBoxElem)):b.addClass("iui-accordion-group-expand"):b.remove();a.allowUpdate=!0;a.refresh();return!0}return!1},_extractGroup:function(a,b){var c=k(b);c.addClass("iui-accordion-header iui-accordion-group");var e="",d="",f="",f=null;c.attr("id")||c.uniqueId();this.options.showIcons&&(f=c.children("[data-element='icon']"),0<f.length&&(e=this._outerHtml(f)));f=c.find("[data-element='content']");0<f.length?(d=this._outerHtml(f),f=f.text()):(f=c.children("span:last-of-type"),f=0<f.length?f.text():c.text());e={id:c.attr("id"),icon:e,text:f,headerContent:d,cid:c.attr("data-cid")};d=this.$groupContent.find("#"+e.cid);0===d.length&&(d=this.$groupContent.eq(a));0<d.length&&(e.content=d.html(),e.cid?d.attr("id",e.cid):(f=this._createId(),d.attr("id",f),e.cid=f,c.attr("data-cid",f)));return e},_setOption:function(a,b){switch(a){case "expandDirection":this.options.expandDirection!==b&&(this.options.expandDirection=b,this.refresh());break;case "groupSpacing":if(!k.isNumeric(b)||0>b||255<b)return;this.options.groupSpacing!==b&&(this.options.groupSpacing=b,this._updateGroupSpacing(b),this.refresh());break;case "headerContentOrientation":this.options.headerContentOrientation!==b&&(this.options.headerContentOrientation=b,this.refresh());break;case "hoverSelection":if(!0!==b&&!1!==b)return;this.options.hoverSelection=b;break;case "rtl":if(!0!==b&&!1!==b)return;this.options.rtl=b;this.refresh();break;case "selectedGroup":if(this._selectGroup(b))this._updateLayout();else return;break;case "selectedIndex":if(this._isIndexInRange(b))if(this._selectGroup(this.currentList[b]))this._updateLayout();else return;else return;break;case "showExpandBox":if(!0!==b&&!1!==b)return;this.options.showExpandBox=b;this.refresh();break;case "showIcons":if(!0!==b&&!1!==b)return;this.options.showIcons=b;this.refresh()}this._super(a,b)},_isGroupEnabled:function(a){return a.enabled||void 0===a.enabled?!0:!1},_selectGroup:function(a){return a&&this._isGroupEnabled(a)&&!1!==this._triggerEvent("beforeselect",a)&&this.options.selectedGroup!==a?(this.prevSelectedIndex=this.options.selectedGroup?k.inArray(this.options.selectedGroup,this.currentList):-1,this.options.selectedGroup=a,this.options.selectedIndex=this.options.selectedGroup?k.inArray(this.options.selectedGroup,this.currentList):-1,a&&this._triggerEvent("afterselect",a),this._triggerEvent("selectionchanged"),!0):!1},_groupClick:function(a,b){this._isIndexInRange(b)&&this._isGroupEnabled(this.currentList[b])&&1===a.which&&this._triggerEvent("groupclick",this.currentList[b],{x:a.pageX,y:a.pageY});a.stopPropagation()},_mouseEnter:function(a,b,c){a.preventDefault();c!==this.options.selectedIndex&&k(b).addClass(this.classNames.header.hovered);this._isIndexInRange(c)&&this._isGroupEnabled(this.currentList[c])&&(this._triggerEvent("grouphover",this.currentList[c]),this.options.hoverSelection&&this.option("selectedGroup",this.currentList[c]));a.stopPropagation()},_mouseLeave:function(a,b,c){a.preventDefault();this._isIndexInRange(c)&&this._isGroupEnabled(this.currentList[c])&&k(b).removeClass(this.classNames.header.hovered)},_mouseDown:function(a,b){a.preventDefault();if(this._isIndexInRange(b)&&this._isGroupEnabled(this.currentList[b]))switch(a.which){case 1:this.option("selectedGroup",this.currentList[b]);break;case 3:this._triggerEvent("grouprightclick",this.currentList[b],{x:a.pageX,y:a.pageY})}a.stopPropagation()},_mouseUp:function(a,b){a.preventDefault()},_rebindEvents:function(){var a=this;a.$groupHeader.each(function(b){var c=k(this);c.off("click mouseenter mouseleave mousedown mouseup").on({click:function(c){a._groupClick(c,b)},mouseenter:function(e){a._mouseEnter(e,c,b)},mouseleave:function(e){a._mouseLeave(e,c,b)},mousedown:function(c){a._mouseDown(c,b)},mouseup:function(b){a._mouseUp(b,c)}})})},_groupRemoving:function(a){this.removeIndex=this.options.selectedIndex},_groupRemoved:function(a){0<this.currentList.length?(a=Math.max(Math.min(this.removeIndex,this.currentList.length-1),0),this.option("selectedIndex",a)):(this.options.selectedGroup=null,this.options.selectedIndex=-1)},addGroup:function(a){this._add(a)},clearGroups:function(){this._clear()},insertGroupAfter:function(a,b){this._insertAfter(a,b)},insertGroupAt:function(a,b){this._insertAt(a,b)},insertGroupBefore:function(a,b){this._insertBefore(a,b)},removeGroup:function(a){this._remove(a)},removeGroupAt:function(a){this._removeAt(a)},loadData:function(a){var b=this;b.clearGroups();a&&(a.forEach(function(a,e){b.items.push({content:a[b.options.dataFields.content],headerContent:a[b.options.dataFields.headerContent],icon:a[b.options.dataFields.icon],id:a[b.options.dataFields.id],text:a[b.options.dataFields.text]})}),b.refresh())},findGroupById:function(a,b){return this._findItemById(a,b)},findGroupByText:function(a,b){return this._findItemByText(a,b)},_getAvailableSpace:function(a){var b=this,c=b.element.height()-2;a&&(c=b.element.width()-2);var e=0;b.$groupHeader.each(function(a){c-=k(this).outerHeight()+b.options.groupSpacing;e++});var d=b._getPaddingValue(b.element);1<e&&(c=a?c+(b.options.groupSpacing-d.right):c+(b.options.groupSpacing-d.bottom));return c},getGroupElement:function(a){return a&&(a=k.inArray(a,this.currentList),this._isIndexInRange(a))?this.$groupHeader.filter(":eq("+a+")"):null},_createElement:function(a){a.id||(a.id=this._createId());a.cid||(a.cid=this._createId());var b="<div id="+a.cid,b=b+(" class='"+this.classNames.content.normal+"'"),b=b+">";a.content&&(b+=a.content);var b=b+"</div>",c="";"up"===this.options.expandDirection&&(c+=b);c+="<"+this.groupHeaderTag+" id="+a.id;a.cid&&(c+=" data-cid="+a.cid);c+=" class='"+this.classNames.header.normal+" "+this.classNames.header.collapse;a.style&&a.style.header&&a.style.header.normal&&(c+=" "+a.style.header.normal);c+="'>";a.headerContent||(c+="<span>"+a.text+"</span>");c+="</"+this.groupHeaderTag+">";"up"!==this.options.expandDirection&&(c+=b);return c},refresh:function(){this._super();var a=this;if(a._isUpdateAllowed()){a.element.empty();var b=a.getList();a.layoutList.length=0;var c="";b.forEach(function(b,e){c=k(a._createElement(b));a.element.append(c);a.layoutList.push({})});a.$groupHeader=a.element.children(a.groupHeaderTag);a.options.showExpandBox&&a.$groupHeader.prepend("<span class='iui-accordion-expand-box iui-accordion-group-expand'></span>");a.element.append(a.$tw);a.$groupContent=a.element.children("div");a.$groupHeader.each(function(b){var c=k(this),e=null;a._isIndexInRange(b)&&(a.options.showIcons&&a.currentList[b].icon&&(e=k(a.currentList[b].icon),e.attr("data-element","icon"),c.prepend(e)),a.currentList[b].headerContent&&(e=k(a.currentList[b].headerContent),e.attr("data-element","content"),c.append(e)))});if("left"===a.options.expandDirection||"right"===a.options.expandDirection){a.remSpace=a._getAvailableSpace(!0);"horizontal"===a.options.headerContentOrientation&&(a.remSpace=a.element.width());var e={},d={};a.$groupHeader.each(function(b){var c=k(this);a.layoutList[b].bounds={x:0,y:0,width:c.width(),height:c.height()};a.layoutList[b].headerContentBounds={x:0,y:0,width:0,height:0};a.layoutList[b].delta={dx:0,dy:0};var n=0,q=0,h=c.children("[data-element='icon']");0<h.length&&(h.css({position:"absolute"}),n=h.outerWidth(!0),q=h.outerHeight(!0));h=a._getContentElem(c);if(0<h.length){var l=h.clone();l.css({position:"absolute",top:"-9999px"});c.append(l);var m=h.position();a.layoutList[b].headerContentBounds={x:m.left,y:m.top,width:l.outerWidth(!0),height:l.outerHeight(!0)};l.remove();"horizontal"===a.options.headerContentOrientation?(n+=a.layoutList[b].headerContentBounds.width+a.contentSpacing,q<a.layoutList[b].headerContentBounds.height&&(q=a.layoutList[b].headerContentBounds.height)):(h.addClass("iui-accordion-horizontal"),a.layoutList[b].newContentPos=h.position(),a.layoutList[b].delta={dx:a.layoutList[b].newContentPos.left-m.left,dy:a.layoutList[b].newContentPos.top-m.top})}l=c.find(".iui-accordion-expand-box");0<l.length&&(h=l.outerWidth(!0),l=l.outerHeight(!0),"horizontal"===a.options.headerContentOrientation&&(n+=h+a.contentSpacing,q<l&&(q=l)));a.layoutList[b].contentBounds={x:0,y:0,width:n,height:q};"horizontal"===a.options.headerContentOrientation&&(d=a._getMarginValue(c),e=a._getPaddingValue(c),a.remSpace-=a.layoutList[b].contentBounds.width+e.left+e.right+d.left+d.right+a.options.groupSpacing+2)});"horizontal"===a.options.headerContentOrientation&&(e=a._getPaddingValue(a.element),a.remSpace+=a.options.groupSpacing-e.right)}a._updateSelectedIndex();a._updateLayout();a._rebindEvents()}},_updateGroup:function(a){for(var b=0;b<this.currentList.length&&(b===a||!this._isGroupEnabled(this.currentList[b]));)b++;this._isIndexInRange(b)&&this.option("selectedGroup",this.currentList[b])},updateLayout:function(a){var b=-1,c=this.option("selectedGroup");this._isGroupEnabled(c)||(b=this.option("selectedIndex"));if(this._isEqual(a,c)){this._updateGroup(b);for(b=a=0;b<this.currentList.length;b++)this._isGroupEnabled(this.currentList[b])&&a++;1<a&&this._updateLayout()}},_updateLayout:function(){"left"===this.options.expandDirection||"right"===this.options.expandDirection?this._updateLayoutHorizontal():this._updateLayoutVertical()},_updateLayoutVertical:function(){var a=this,b=!0;a.allowEvents&&a._isIndexInRange(a.prevSelectedIndex)&&(b=a._triggerEvent("beforecollapse",a.currentList[a.prevSelectedIndex]));a.allowEvents&&!1!==b&&a._isIndexInRange(a.options.selectedIndex)&&(b=a._triggerEvent("beforeexpand",a.currentList[a.options.selectedIndex]));if(!1!==b){a.$groupHeader.each(function(b){var c=k(this),e=a._getPaddingValue(c);b=c.height();var d={height:b};c.css(d);var h=c.children("[data-element='icon']");0<h.length&&(d=h.outerHeight(!0),d={position:"absolute",top:e.top+(b-d)/2+"px"},a.options.rtl?d.right=e.right+"px":d.left=e.left+"px",h.css(d));var l=c.find(".iui-accordion-expand-box");0<l.length&&(d=l.outerHeight(!0),d={top:e.top+(b-d)/2+"px"},a.options.rtl?d.left=e.left+"px":d.right=e.right+"px",l.css(d));c=a._getContentElem(c);0<c.length&&(d=c.outerHeight(!0),d={position:"absolute",top:e.top+(b-d)/2+"px"},a.options.rtl?d.right=function(){var a=e.right;0<h.length&&(a+=h.outerWidth(!0));return a+"px"}:d.left=function(){var a=e.left;0<h.length&&(a+=h.outerWidth(!0));return a+"px"},c.css(d))});var b=-1,c=a._getAvailableSpace();if(a.options.allowAnimation){a.$groupContent.hide();if(a._isIndexInRange(a.prevSelectedIndex)){var b=a.currentList[a.prevSelectedIndex].cid,e=a.$groupContent.filter("[id="+b+"]");e.show().css("height",c+"px").animate({height:0},{duration:a.options.animationSpeed,queue:!1,complete:function(){e.hide();a._triggerEvent("aftercollapse",a.currentList[a.prevSelectedIndex])}})}if(a._isIndexInRange(a.options.selectedIndex)){var b=a.currentList[a.options.selectedIndex].cid,d=a.$groupContent.filter("[id="+b+"]");d.show().animate({height:c+"px"},{duration:a.options.animationSpeed,queue:!1,complete:function(){d.show();a._triggerEvent("afterexpand",a.currentList[a.options.selectedIndex])}})}}else a._isIndexInRange(a.options.selectedIndex)&&(b=a.currentList[a.options.selectedIndex].cid),a.$groupContent.hide().filter("[id="+b+"]").css("height",c+"px").show(),a.allowEvents&&a._isIndexInRange(a.prevSelectedIndex)&&a._triggerEvent("aftercollapse",a.currentList[a.prevSelectedIndex]),a.allowEvents&&a._isIndexInRange(a.options.selectedIndex)&&a._triggerEvent("afterexpand",a.currentList[a.options.selectedIndex]);a._updateCurrentSelection()}},_updateLayoutHorizontal:function(){var a=this,b=!0;a.allowEvents&&a._isIndexInRange(a.prevSelectedIndex)&&(b=a._triggerEvent("beforecollapse",a.currentList[a.prevSelectedIndex]));a.allowEvents&&!1!==b&&a._isIndexInRange(a.options.selectedIndex)&&(b=a._triggerEvent("beforeexpand",a.currentList[a.options.selectedIndex]));if(!1!==b){var c=0,e=a.remSpace,d={},f={},y=a.element.height(),n=0,q=0,h=0,l=0;a.$groupContent.hide();a.$groupHeader.each(function(b){var r=k(this);d=a._getBorderValue(r);f=a._getPaddingValue(r);n=a.layoutList[b].bounds.height;"horizontal"===a.options.headerContentOrientation&&(n=a.layoutList[b].contentBounds.width);q=y-(f.top+f.bottom)-(d.top+d.bottom);var g={position:"absolute",width:n,height:q};"right"===a.options.expandDirection&&(a.options.allowAnimation||(g.left=c),r.css(g),a.options.allowAnimation&&r.animate({left:c+"px"},{duration:a.options.animationSpeed,queue:!1}));var p=0,m=0,u=r.children("[data-element='icon']");0<u.length&&(p=u.outerWidth(!0),m=u.outerHeight(!0),g={position:"absolute"},"horizontal"===a.options.headerContentOrientation?(g.top=f.top+(q-m)/2+"px",a.options.rtl?g.right=f.right+"px":g.left=f.left+"px"):(g.left=f.left+(n-p)/2+"px",a.options.rtl?g.bottom=f.bottom+"px":g.top=f.top+"px"),u.css(g));var x=m=0,v=r.find(".iui-accordion-expand-box");0<v.length&&(m=v.outerWidth(!0),x=v.outerHeight(!0),g={position:"absolute"},"horizontal"===a.options.headerContentOrientation?(g.top=f.top+(q-x)/2+"px",a.options.rtl?g.left=f.left+"px":g.right=f.right+"px"):(g.left=f.left+(n-m)/2+"px",a.options.rtl?g.top=f.top+"px":g.bottom=f.bottom+"px"),v.css(g));m=a._getContentElem(r);if(0<m.length){var t=a.layoutList[b].headerContentBounds.y,x=a.layoutList[b].headerContentBounds.x,v=a.layoutList[b].headerContentBounds.height,w=a.layoutList[b].headerContentBounds.width;"horizontal"===a.options.headerContentOrientation&&(t=f.top,v=a.layoutList[b].headerContentBounds.width,w=a.layoutList[b].headerContentBounds.height);g={position:"absolute",left:x-a.layoutList[b].delta.dx+(n-v)/2+"px"};"horizontal"===a.options.headerContentOrientation?(g.top=t+"px",a.options.rtl?(g.right=f.right,0<p&&(g.right+=p+a.contentSpacing),g.right+="px"):(g.left=f.left,0<p&&(g.left+=p+a.contentSpacing),g.left+="px")):(g.left=x-a.layoutList[b].delta.dx+(n-v)/2+"px",g.top=a.options.rtl?function(){var c=t-a.layoutList[b].delta.dy+q-w-2;0<u.length&&(c-=u.outerHeight(!0)+3);return c+"px"}:function(){var c=t-a.layoutList[b].delta.dy;0<u.length&&(c+=u.outerHeight(!0));return c+"px"});m.css(g)}"right"===a.options.expandDirection&&(c+=r.outerWidth()+a.options.groupSpacing);a.options.allowAnimation&&a._isIndexInRange(b)&&b!==a.options.selectedIndex&&(g=a.currentList[b].cid,p=a.$groupContent.filter("[id="+g+"]"),0<p.length&&(d=a._getBorderValue(p),f=a._getPaddingValue(p),g={position:"absolute",width:0,height:y-(f.top+f.bottom)-(d.top+d.bottom)},b===a.prevSelectedIndex?h="right"===a.options.expandDirection?c-a.options.groupSpacing:c:g.left="right"===a.options.expandDirection?c-a.options.groupSpacing:c,p.css(g)));b===a.options.selectedIndex&&(g=a.currentList[a.options.selectedIndex].cid,p=a.$groupContent.filter("[id="+g+"]"),0<p.length&&(d=a._getBorderValue(p),f=a._getPaddingValue(p),g={position:"absolute",width:e-(f.left+f.right)-(d.left+d.right),height:y-(f.top+f.bottom)-(d.top+d.bottom)},l="right"===a.options.expandDirection?c-a.options.groupSpacing:c,a.options.allowAnimation||(g.left=l),p.css(g),c+=p.outerWidth(),a.options.allowAnimation&&p.css("width",0)));"left"===a.options.expandDirection&&(g={position:"absolute",width:n,height:q},a.options.allowAnimation||(g.left=c),r.css(g),a.options.allowAnimation&&r.animate({left:c+"px"},{duration:a.options.animationSpeed,queue:!1}),c+=r.outerWidth()+a.options.groupSpacing)});if(a.options.allowAnimation){if(a._isIndexInRange(a.prevSelectedIndex)){var m=a.currentList[a.prevSelectedIndex].cid,t=a.$groupContent.filter("[id="+m+"]"),d=a._getBorderValue(t),f=a._getPaddingValue(t),b=e-(f.left+f.right)-(d.left+d.right);t.show().css("width",b+"px").animate({left:h,width:0},{duration:a.options.animationSpeed,queue:!1,complete:function(){t.hide();a.allowEvents&&a._triggerEvent("aftercollapse",a.currentList[a.prevSelectedIndex])}})}if(a._isIndexInRange(a.options.selectedIndex)){var m=a.currentList[a.options.selectedIndex].cid,w=a.$groupContent.filter("[id="+m+"]"),d=a._getBorderValue(w),f=a._getPaddingValue(w),b=e-(f.left+f.right)-(d.left+d.right);w.css("width",0).show().animate({left:l,width:b+"px"},{duration:a.options.animationSpeed,queue:!1,complete:function(){w.show();a.allowEvents&&a._triggerEvent("afterexpand",a.currentList[a.options.selectedIndex])}})}}else a._isIndexInRange(a.options.selectedIndex)&&(m=a.currentList[a.options.selectedIndex].cid),a.$groupContent.hide().filter("[id="+m+"]").show(),a.allowEvents&&a._isIndexInRange(a.prevSelectedIndex)&&a._triggerEvent("aftercollapse",a.currentList[a.prevSelectedIndex]),a.allowEvents&&a._isIndexInRange(a.options.selectedIndex)&&a._triggerEvent("afterexpand",a.currentList[a.options.selectedIndex]);a._updateCurrentSelection()}},_updateGroupSpacing:function(a){switch(this.options.expandDirection){case "up":1<this.currentList.length&&this.$groupContent.css("margin-top",a+"px").filter(":first-of-type").css("margin-top",0);this.$groupHeader.css("margin-top",a+"px").filter(":eq("+this.options.selectedIndex+")").css("margin-top",0).end().filter(":first-of-type").css("margin-top",0);break;case "down":1<this.currentList.length&&this.$groupContent.css("margin-bottom",a+"px").filter(":last-of-type").css("margin-bottom",0),this.$groupHeader.css("margin-bottom",a+"px").filter(":eq("+this.options.selectedIndex+")").css("margin-bottom",0).end().filter(":last-of-type").css("margin-bottom",0)}},_updateCurrentSelection:function(){var a=this.classNames.header.collapse,b=this.options.selectedIndex,c=this.classNames.header.selected,e=this.classNames.header.expand.down,d=this.classNames.content.normal,f=this.classNames.content.expand.down,k=this.classNames.expandBox.normal,n=this.classNames.expandBox.collapsed,q=this.classNames.expandBox.expanded;if(this._isIndexInRange(this.options.selectedIndex)){var h=this.currentList[this.options.selectedIndex];h.style&&h.style.header&&h.style.header.selected&&(c=h.style.header.selected);h.style&&h.style.content&&(d=h.style.content)}this._updateGroupSpacing(this.options.groupSpacing);switch(this.options.expandDirection){case "right":e=this.classNames.header.expand.right;f=this.classNames.content.expand.right;break;case "up":e=this.classNames.header.expand.up;f=this.classNames.content.expand.up;break;case "left":e=this.classNames.header.expand.left,f=this.classNames.content.expand.left}this.$groupHeader.removeClass(c+" "+e).addClass(a).filter(":eq("+b+")").removeClass(a).addClass(c+" "+e);this._isIndexInRange(this.options.selectedIndex)&&this.$groupHeader.find("span."+k).removeClass(n).addClass(q).end().filter(":eq("+this.options.selectedIndex+")").find("span."+k).removeClass(q).addClass(n);a=-1;this._isIndexInRange(this.options.selectedIndex)&&(a=this.currentList[this.options.selectedIndex].cid);this.$groupContent.filter("[id="+a+"]").addClass(d).addClass(f)},_updateSelectedIndex:function(){if(0<this.currentList.length){0>this.options.selectedIndex&&this.options.selectedGroup&&(this.options.selectedIndex=k.inArray(this.options.selectedGroup,this.currentList));this.options.selectedGroup||(this._isIndexInRange(this.options.selectedIndex)?this.options.selectedGroup=this.currentList[this.options.selectedIndex]:this.options.selectedGroup=this.currentList[0]);var a=k.inArray(this.options.selectedGroup,this.currentList);this.options.selectedIndex!==a&&(this.options.selectedIndex=a)}else this.options.selectedGroup=null,this.options.selectedIndex=-1}})})(jQuery);